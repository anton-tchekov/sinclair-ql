100  SER_OPEN
110  SER_TEST
120  FOR I = 0 TO 20
130  PIN_TOGGLE(0)
140  PAUSE(5)
150  NEXT I
3000 DEF PROC SER_OPEN
3010 OPEN #3, ser2i
3020 BAUD 2400
3030 END DEF
3040 :
3050 DEF PROC SER_CLOSE
3060 CLOSE #3
3070 END DEF
3080 :
3090 DEF FN SER_TEST(n)
3100 LOC A$, B$, r%
3110 A$ = "Hello World!"
3120 PRINT #3, "e";
3130 PRINT #3, A$
3140 INPUT #3, B$
3150 IF A$ = B$ THEN
3160 r% = 1
3170 ELSE
3180 r% = 0
3190 END IF
3200 RET r%
3210 END DEF
3220 :
3230 DEF FN PIN_READ(n)
3240 LOC r%
3250 PRINT #3, "r";
3260 PRINT #3, n
3270 INPUT #3, r%
3280 RET r%
3290 END DEF
3300 :
3310 DEF FN ANA_READ(n)
3320 LOC r%
3330 PRINT #3, "a";
3340 PRINT #3, n
3350 INPUT #3, r%
3360 RET r%
3370 END DEF
3380 :
3390 DEF PROC PIN_OUTPUT(n)
3400 PRINT #3, "o";
3410 PRINT #3, n
3420 END DEF
3430 :
3440 DEF PROC PIN_INPUT(n)
3450 PRINT #3, "i";
3460 PRINT #3, n
3470 END DEF
3480 :
3490 DEF PROC PIN_HIGH(n)
3500 PRINT #3, "h";
3510 PRINT #3, n
3520 END DEF
3530 :
3540 DEF PROC PIN_LOW(n)
3550 PRINT #3, "l";
3560 PRINT #3, n
3570 END DEF
3580 :
3590 DEF PROC PIN_TOGGLE(n)
3600 PRINT #3, "t";
3610 PRINT #3, n
3620 END DEF
3630 :
3640 DEF PROC PWM_WRITE(n, v)
3650 PRINT #3, "c";
3660 PRINT #3, n
3670 PRINT #3, "p";
3680 PRINT #3, v
3690 END DEF
3700 REM  0  PB0  AIN0  Analog comparator 0
3710 REM  1  PB1  AIN1  Analog comparator 1
3720 REM  2  PB2  OC0A  PWM 0
3730 REM  3  PB3  OC1A  PWM 2
3740 REM  4  PB4  OC1B  PWM 3
3750 REM  5  PB5
3760 REM  6  PB6
3770 REM  7  PB7
3780 REM  8  PD2
3790 REM  9  PD3
3800 REM 10  PD4
3810 REM 11  PD5  OC0B  PWM 1
3820 REM 12  PD6
